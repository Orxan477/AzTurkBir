@using Aztobir.Business.ViewModels
@using Aztobir.Business.ViewModels.Home.News
@model Paginate<NewsVM>
@{
    ViewData["Title"] = "Index";
	int count = ViewBag.TakeCount;
    int page = Model.PageCount;
    int productNum = ((Model.CurrentPage - 1) * count) + 1;
    int previous = Model.CurrentPage - 1;
    int next = Model.CurrentPage + 1;
}

<!-- breadcrumb-banner-area -->
	<div class="breadcrumb-banner-area bg-img-2 bg-opacity-2 ptb-100">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div class="breadcrumb-text">
						<div class="breadcrumb-menu">
							<ul>
								<li><a asp-controller="home" asp-action="index">Ana Sayfa</a></li>
								<li><span>Haberler</span></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- breadcrumb-banner-area-end -->
	<!-- our-blog-area-start -->
	<div class="our-blog-area pb-70 pt-80">
		<div class="container">
			<div class="section-title text-center">
				<h3>@ViewBag.News_Head</h3>
				<p>@ViewBag.News_Content</p>
			</div>
			<div class="row">
				@foreach (var news in Model.Items) //count, obsi viewModele salmaq
				{
					<div class="col-md-4 col-sm-6">
					<div class="single-blog mb-30">
						<div class="bolg-img">
							<a asp-controller="news" asp-action="detail" asp-route-id="@news.Id"><img src="~/assets/img/@news.Image" alt="" /></a>
						</div>
						<div class="blog-text">
							<h4><a asp-controller="news" asp-action="detail" asp-route-id="@news.Id">@news.Name</a></h4>
							<div class="blog-date">
								<span><i class="fa fa-calendar"></i>@news.CreatedAt.Day/@news.CreatedAt.Month/@news.CreatedAt.Year</span>
								<span><i class="fa fa-comment"></i>0</span>
							</div>
							<p>@(Html.Raw(news.Content.Length<=110?news.Content:news.Content.Substring(0,110)+"..."))</p>
							<a asp-controller="news" asp-action="detail" asp-route-id="@news.Id">Read more</a>
						</div>
					</div>
				</div>
				}
			</div>
			@if (Model.PageCount!=1 && Model.PageCount!=0)
                      {
                           <div class="col-lg-12 grid-margin stretch-card justify-content-center mt-4 mb-0">
                                <nav aria-label="...">
                                    <ul class="pagination pagination-md">
                                        <li class="page-item @(Model.CurrentPage<3?"d-none":"")">
                                            <a class="page-link" asp-action="Index" asp-route-page="1">First</a>
                                        </li>
                                        <li class="page-item @(Model.CurrentPage==1   ?"d-none":"")">
                                            <a class="page-link" asp-action="Index" asp-route-page="@previous">Previous</a>
                                        </li>

                                        @if (Model.CurrentPage >= 2 && Model.CurrentPage < Model.PageCount)
                                        {
                                            @for (int i = Model.CurrentPage - 1; i <= Model.CurrentPage + 1; i++)
                                            {
                                                <li class="page-item @(Model.CurrentPage==i?"disabled":"")">
                                                    <a class="page-link" asp-action="Index" asp-route-page="@i">@i</a>
                                                </li>
                                            }
                                        }
                                        <li class="page-item @(Model.CurrentPage==Model.PageCount?"d-none":"")">
                                            <a class="page-link" asp-action="Index" asp-route-page="@next">Next ></a>
                                        </li>
                                        <li class="page-item @(Model.CurrentPage==Model.PageCount?"d-none":"")">
                                            <a class="page-link" asp-action="Index" asp-route-page="@Model.PageCount">Last</a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>  
                      }
		</div>
	</div>
	<!-- our-blog-area-end -->

